{% extends 'base.html' %}
{% block title %}Detail Order {{ id_pesanan }}{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4 text-center">Detail Order <span class="text-primary">{{ id_pesanan }}</span></h2>
    
    <div class="mb-3">
        <a href="{% url 'scanpicking' %}" class="btn btn-secondary">Kembali ke List Pick</a>
    </div>
    
    <form autocomplete="off" class="needs-validation" novalidate>
        <!-- Info Utama Order -->
        <div class="row g-2 align-items-center mb-3">
            <div class="col-md-3">
                <label class="form-label mb-1">ID Pesanan</label>
                <input type="text" class="form-control" value="{{ id_pesanan }}" readonly>
            </div>
            <div class="col-md-3">
                <label class="form-label mb-1">Tanggal</label>
                <input type="text" class="form-control" value="{{ tanggal_pembuatan }}" readonly>
            </div>
            <div class="col-md-3">
                <label class="form-label mb-1">Status</label>
                <input type="text" class="form-control" value="{{ status }}" readonly>
            </div>
            <div class="col-md-3">
                <label class="form-label mb-1">Total Item</label>
                <input type="text" class="form-control" value="{{ total_item }}" readonly>
            </div>
        </div>
        
        <div class="row g-2 align-items-center mb-3">
            <div class="col-md-3">
                <label class="form-label mb-1">Channel</label>
                <input type="text" class="form-control" value="{{ channel }}" readonly>
            </div>
            <div class="col-md-3">
                <label class="form-label mb-1">Nama Toko</label>
                <input type="text" class="form-control" value="{{ nama_toko }}" readonly>
            </div>
            <div class="col-md-3">
                <label class="form-label mb-1">Order Type</label>
                <input type="text" class="form-control" value="{{ order_type }}" readonly>
            </div>
            <div class="col-md-3">
                <label class="form-label mb-1">Status Order</label>
                <input type="text" class="form-control" value="{{ status_order }}" readonly>
            </div>
        </div>
        
        <div class="row g-2 align-items-center mb-3">
            <div class="col-md-6">
                <label class="form-label mb-1">Kurir</label>
                <input type="text" class="form-control" value="{{ kurir|default:'-' }}" readonly>
            </div>
            <div class="col-md-6">
                <label class="form-label mb-1">Metode Pengiriman</label>
                <input type="text" class="form-control" value="{{ metode_pengiriman|default:'-' }}" readonly>
            </div>
        </div>
        
        <!-- Detail Produk -->
        <div class="row mb-2">
            <div class="col-md-12">
                <label class="form-label mb-1">Detail Produk</label>
                <div class="table-responsive">
                    <table class="table table-bordered align-middle" id="produk-table">
                        <thead class="table-light">
                            <tr>
                                <th>SKU</th>
                                <th>Barcode</th>
                                <th>Nama Produk</th>
                                <th>Variant</th>
                                <th>Brand</th>
                                <th>Stok</th>
                                <th>Jumlah</th>
                                <th>Harga</th>
                                <th>Batch</th>
                                <th>Jumlah Ambil</th>
                                <th>Status Ambil</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in detail_items %}
                            <tr>
                                <td>{{ item.sku }}</td>
                                <td>{{ item.barcode }}</td>
                                <td>{{ item.nama_produk }}</td>
                                <td>{{ item.variant_produk }}</td>
                                <td>{{ item.brand }}</td>
                                <td>
                                    <span class="badge {% if item.stok > 0 %}bg-success{% else %}bg-danger{% endif %}">
                                        {{ item.stok }}
                                    </span>
                                </td>
                                <td>{{ item.jumlah }}</td>
                                <td>{{ item.harga_promosi|floatformat:0 }}</td>
                                <td>{{ item.nama_batch }}</td>
                                <td>{{ item.jumlah_ambil }}</td>
                                <td>
                                    <span class="badge 
                                        {% if item.status_ambil == 'completed' %}bg-success
                                        {% elif item.status_ambil == 'partial' %}bg-warning
                                        {% else %}bg-secondary{% endif %}">
                                        {{ item.status_ambil }}
                                    </span>
                                </td>
                            </tr>
                            {% empty %}
                            <tr><td colspan="11" class="text-center">Tidak ada detail produk.</td></tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </form>
</div>
{% endblock %} 